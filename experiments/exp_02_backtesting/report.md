# 트레이딩 전략 백테스팅 시뮬레이터 실험 보고서

**작성일**: 2023-04-03
**실험명**: exp_02_backtesting
**작성자**: AI Assistant

## 개요 (Overview)
이 실험에서는 다양한 기술적 지표를 활용한 트레이딩 전략의 백테스팅 시뮬레이터를 구현하고, 파라미터 최적화를 통해 최적의 전략을 탐색합니다. 3가지 이상의 파라미터를 활용하는 복합 트레이딩 전략에 초점을 맞추었으며, 백테스팅 결과를 CSV 및 이미지 형태로 시각화합니다.

## 실험 목표
1. 다양한 트레이딩 전략 (이동평균, RSI, MACD)을 구현하고 백테스팅
2. 각 전략의 조합으로 복합 전략을 설계 및 백테스팅
3. 파라미터 그리드 탐색을 통한 최적 파라미터 도출
4. 백테스트 결과를 CSV 및 시각화 이미지로 분석

## 구현된 전략

### 개별 전략
1. **이동평균선 교차 전략 (MA Crossover)**
   - 파라미터: ma_short, ma_long
   - 신호: 단기 이동평균이 장기 이동평균 상회/하회 시 매수/매도

2. **RSI(상대강도지수) 전략**
   - 파라미터: rsi_period, oversold, overbought
   - 신호: 과매도/과매수 구간에서 반등/하락 시 매수/매도

3. **MACD 전략**
   - 파라미터: macd_fast, macd_slow, macd_signal
   - 신호: MACD 라인이 시그널 라인 상향/하향 돌파 시 매수/매도

### 복합 전략
- 3가지 기본 전략을 가중 평균하여 최종 신호 생성
- 파라미터: 
  - 개별 전략 파라미터 (ma_short, ma_long, rsi_period 등)
  - 전략별 가중치 (weight_ma, weight_rsi, weight_macd)
  - 신호 임계값 (threshold)

## 백테스팅 방법론
1. 샘플 OHLCV 데이터 생성 또는 외부 데이터 로드
2. 개별 전략 및 복합 전략에 대한 백테스트 수행
3. 파라미터 그리드 탐색을 통한 최적 파라미터 조합 탐색
4. 성능 지표 계산: 총 수익률, 연간 수익률, 샤프 비율, 최대 낙폭, 승률 등
5. 결과를 CSV와 시각화 차트로 저장

## 결과 요약
- 복합 전략이 대체로 개별 전략보다 높은 성과를 보임
- 파라미터 최적화를 통해 샤프 비율 기준 최적의 전략 도출
- 최적 전략은 대부분의 시장 환경에서 매수-홀드 전략 대비 우수한 성과
- 상승장에서는 이동평균 기반 전략, 변동성 높은 시장에서는 RSI 기반 전략이 강점

## 코드 사용법
```bash
# 기본 실행 (샘플 데이터 생성)
python src/run_backtest.py

# 외부 데이터 사용
python src/run_backtest.py --data /path/to/data.csv

# 결과 디렉토리 지정
python src/run_backtest.py --results /custom/results/dir --charts /custom/charts/dir
```

## 결과 파일
- `results/sample_data.csv` : 샘플 OHLCV 데이터
- `results/individual_results.csv` : 개별 전략 백테스트 결과
- `results/grid_search_results.csv` : 파라미터 그리드 탐색 결과
- `results/charts/` : 다양한 성과 시각화 차트

## 추가 개선 아이디어
- 기계학습 기반 전략 추가 (머신러닝/딥러닝 모델)
- 워크업 기간(warm-up period) 설정으로 초기 신호 안정화
- 포지션 사이징 전략 다양화 (고정 비율, 켈리 기준 등)
- 동적 파라미터 최적화 (시장 환경에 따른 적응형 파라미터)
- 몬테카를로 시뮬레이션을 통한 리스크 분석

## Lesson Learned
- 단일 전략보다 다양한 전략의 조합이 대체로 안정적인 성과 제공
- 파라미터 최적화에는 과적합 위험이 있으므로 검증 기간 분리 필요
- 거래 비용(수수료)이 장기 수익률에 큰 영향을 미침
- 시각화는 백테스트 결과 해석에 매우 중요한 요소
- 파라미터의 민감도 분석이 필요함 (일부 파라미터는 영향이 크고, 일부는 작음)

## Changes from last iteration
- 새로운 백테스팅 시뮬레이터 구현
- 복합 전략 및 파라미터 최적화 기능 추가
- 결과 시각화 도구 개선
- CSV 형태의 결과 저장 기능 추가 